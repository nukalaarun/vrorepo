<?xml version='1.0' encoding='UTF-8'?>
<dunes-script-module name="executeDay2ActionExtendLease" result-type="void" api-version="6.0.0" id="e94f3cfd-d2f9-40d0-bd24-d08c193adc62" version="0.0.0" allowed-operations="vfe" category-name="com.terasky.utils">
  <param n="deploymentId" t="string"><![CDATA[]]></param>
  <param n="requestedDate" t="Date"><![CDATA[]]></param>
  <script encoded="false"><![CDATA[timeoutMinutes = 5
sleepIntervalSeconds = 5

pathUri = "/deployment/api/deployments/" + deploymentId + "/requests"
var payload = {
    "actionId": "Deployment.ChangeLease",
    "inputs": {
        "Lease Expiration Date": requestedDate
    }
}
var content = System.getModule("com.terasky.utils").vraPostOperation(pathUri,JSON.stringify(payload));
content = JSON.parse(content)
requestId = content.id
System.getModule("com.terasky.utils").waitForDeploymentRequestStatus(deploymentId,requestId,timeoutMinutes,sleepIntervalSeconds);]]></script>
</dunes-script-module>